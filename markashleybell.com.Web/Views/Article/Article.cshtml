@model markashleybell.com.Web.Models.ArticleViewModel

@{
    ViewBag.Title = "Article";
    Layout = "~/Views/Shared/Main.cshtml";
}

@section content {

    <h1>@Model.Title</h1>
    
    <p>@Model.Published.ToString("dddd, d MMMM yyyy HH:mm")</p>

    @(new HtmlString(Model.BodyHtml))
    
    @if (Model.Comments.Count > 0) {
    
        <div id="comments">
        
            <h2>Comments</h2>

            @foreach (CommentViewModel c in Model.Comments)
            {
                <h3>@(new HtmlString((c.Url == "") ? c.AuthorName : "<a href=\"" + c.Url + "\">" + c.AuthorName + "</a>")) @c.Published.ToString("dd/MM/yyyy hh:mm")</h3>
            
                @(new HtmlString(c.BodyHtml))
            
            }

        </div>
        
    }
    
    @Html.Partial("CommentForm", new CommentViewModel { ArticleID = Model.ArticleID })

    <script type="text/javascript" src="/scripts/comment.js"></script>
    <script type="text/javascript">
        $('pre>code').addClass('prettyprint');
        prettyPrint();
    </script>

}